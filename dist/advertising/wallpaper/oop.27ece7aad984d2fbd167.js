(self.cmlsSocastUtils=self.cmlsSocastUtils||[]).push([[671],{809:function(t,e,o){"use strict";o.r(e);var i=o(5072),n=o.n(i),s=o(7825),a=o.n(s),r=o(4284),d=o.n(r),l=o(2543),c=o.n(l),h=o(5056),u=o.n(h),g=o(540),f=o.n(g),p=o(1113),m=o.n(p),b=o(2403),w=o(9735),y=o.n(w),v={};b.A&&b.A.locals&&(v.locals=b.A.locals);var S,C=0,A={};A.styleTagTransform=m(),A.setAttributes=u(),A.insert=c(),A.domAPI=y()()?d():a(),A.insertStyleElement=f(),v.use=function(t){return A.options=t||{},C++||(S=n()(b.A,A)),v},v.unuse=function(){C>0&&! --C&&(S(),S=null)},e.default=v},2403:function(t,e,o){"use strict";var i=o(1601),n=o.n(i),s=o(6314),a=o.n(s)()(n());a.push([t.id,"#gpt-wallpaper-slot-container{height:0;left:0;overflow:hidden;position:fixed;top:var(--nav-height,75px);width:100vw;z-index:0}#gpt-wallpaper-slot-container.delivered~#sc-content-area{box-shadow:0 0 25px rgba(0,0,0,.4)}#gpt-wallpaper-slot-container.delivered{height:100%}#gpt-wallpaper-slot-container.delivered~.bgd-img-container{display:none}#gpt-wallpaper-slot{all:initial;display:block!important;height:100%!important;left:0;max-height:0!important;overflow:hidden;position:sticky;top:0;width:100%!important;z-index:0}.delivered #gpt-wallpaper-slot{max-height:100%!important}#gpt-wallpaper-slot div,#gpt-wallpaper-slot iframe{height:100%;width:100%}",""]),e.A=a},2543:function(t){t.exports=function(t,e){(e&&e.target?e.target:document.head).appendChild(t)}},9111:function(t,e,o){"use strict";o.r(e),o(4114),o(8111),o(7588),o(3579);var i=o(169);const n=new window.__CMLSINTERNAL.Logger(`${i.vD} ${i.rE}`);(t=>{const{h:e,domReady:s}=t.__CMLSINTERNAL.libs;class a{context=t.self;pos=i.n1;divId=i.Ne;containerId=`${i.Ne}-container`;injectPoint=i.WD;obstructions=i.obtructions;adTag;slot;container;slotDiv;nosidewalls;constructor(){return n.info("Initializing wallpaper ad."),this.context=t.self,this.adTag=t.__CMLSINTERNAL.adTag,!!this.testConditions()&&(this.context.matchMedia(i.cq).matches?void s(()=>this.generateSlot()):(n.info("Device does not match restrictions, will not inject."),!1))}testConditions(){let t=this.injectPoint;return this.injectPoint.includes("::before")&&(t=t.replace("::before","")),this.context.document.querySelector(t)?this.slot?(n.warn("Slot already exists!"),!1):!this.adTag.getSlots().some(t=>t.getTargeting("pos").includes(this.pos))||(n.info("In-page wallpaper slot already exists, will not inject."),!1):(n.warn("Inject point not found!"),!1)}generateSlot(){let i=this.injectPoint,s=!1;if(this.injectPoint.includes("::before")&&(s=!0,i=i.replace("::before","")),i=this.context.document.querySelector(i),!i)return n.warn("Inject point not found!"),!1;n.debug("Generating slot"),Promise.all([o.e(96),o.e(671)]).then(o.bind(o,809)).then(t=>{t?.default?.use&&t.default.use({target:this.context.document.body})}),this.container=e("div",{id:`${this.containerId}`}),this.slotDiv=e("div",{id:`${this.divId}`}),this.container.appendChild(this.slotDiv),s?i.before(this.container):i.prepend(this.container),this.adTag.queue(()=>{this.slot=this.adTag.defineSlot({outOfPage:!0,adUnitPath:t.__CMLSINTERNAL.adPath+"/wallpaper",div:this.divId,size:[[1,1]],collapse:!0,targeting:{pos:this.pos,noprebid:"noprebid"}}),this.slot?(this.adTag.addListener("slotRenderEnded",e=>{if(e.slot===this.slot){if(e.isEmpty)return n.debug("Slot is empty."),void this.hideAdSlot();t._CMLS.autoRefreshAdsExclusion=t._CMLS.autoRefreshAdsExclusion||[],t._CMLS.autoRefreshAdsExclusion.push(this.slot.getSlotElementId()),this.handleCreative()}}),this.adTag.display(this.slotDiv,this.adTag.isInitialLoadDisabled()),n.info("Slot created.")):n.error("Could not define slot!")})}hideAdSlot(){this.container.classList.remove("delivered"),this.context.document.body.classList.remove("has-wallpaper-ad")}showAdSlot(){this.container.classList.add("delivered"),this.context.document.body.classList.add("has-wallpaper-ad")}handleCreative(){const t=this.slotDiv.querySelector("iframe");if(!t)return n.warn("Could not find iframe in slot div!"),this.hideAdSlot(),!1;t.contentWindow.document?(this.centerIframeContent(t),this.getBackgroundColorFromImage(t)):n.warn("Could not access iframe document! Are you using a safeframe?"),this.showAdSlot(),this.clearObstructions()}clearObstructions(){if(this.context.NO_SIDEWALLS=!0,t.__CMLSINTERNAL?.sidewallAds?.destroy&&(n.debug("Destroying injected sidewall ads"),t.__CMLSINTERNAL.sidewallAds.destroy()),!this.obstructions)return;const e=this.context.document.querySelectorAll(this.obstructions);if(0===e.length)return;const o=[];if(e.forEach(t=>{const e=t.querySelectorAll('[id^="div-gpt-ad"],[data-google-query-id],iframe[id^="google_ads_iframe"]');e?.length&&e.forEach(t=>{let e=t;"iframe"===e.nodeName&&(e=t.parentNode),o.push(e.id)})}),o.length){const t=[];this.adTag.getSlots().forEach(e=>{o.includes(e.getSlotElementId())&&t.push(e)}),t.length&&(n.debug("Destroying ads in obstructions",t),this.adTag.destroySlots(t))}n.debug("Removing obstructions",e),e.forEach(t=>{t.remove()})}centerIframeContent(t){const e=t.contentWindow.document;if(!e)return n.warn("Could not access iframe document! Are you using a safeframe?"),!1;const o=e.querySelector('a[href*="/pcs/click"]');o&&(o.style.display="flex",o.style.justifyContent="center",o.style.width="100%",o.style.height="100%")}getBackgroundColorFromImage(t){const e=t.contentWindow.document;if(!e)return n.warn("Could not access iframe document! Are you using a safeframe?"),!1;const o=e.querySelector('a[href*="/pcs/click"]');if(o.style.backgroundColor&&"none"!==o.style.backgroundColor&&"transparent"!==o.style.backgroundColor)return n.info("Using background color from a tag."),void(e.body.style.backgroundColor=o.style.backgroundColor);const i=e.querySelector("[data-bgcolor]");if(i&&i.getAttribute("data-bgcolor")){let t=i.getAttribute("data-bgcolor");return n.info("Using background color from creative data-bgcolor attribute.",t),void(e.body.style.backgroundColor=t)}const s=e.querySelector('.img_ad,img[src]:not([width="1"]):not([width="0"])');if(!s)return void n.debug("Could not find .img_ad!");n.debug("Attempting to discover color from image",s);const a=new Image;a.crossOrigin="anonymous",a.onload=()=>{const t=s("canvas",null),o=t.getContext("2d"),i=a.naturalWidth||a.offsetWidth||a.width,s=a.naturalHeight||a.offsetHeight||a.height,r={x:i/2,y:s/2};t.width=i,t.height=s,this.context.drawImage(a,0,0);const d=o.getImageData(r.x,r.y,1,1);if(!d.data)return void n.debug("Could not get pixel data!");const l=d.data.slice(0,3);n.info("Setting background color from image",l),e.body.style.backgroundColor=`rgb(${l.join(",")})`},a.src=s.src}}t?.__CMLSINTERNAL?.adPath?t.__CMLSINTERNAL[i.k5]=new a:t.addEventListener("cmls-adpath-discovered",()=>{t.__CMLSINTERNAL[i.k5]=new a})})(window.self)}}]);